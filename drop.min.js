/*! drop 0.5.3 */
(function(){var t,e,n,o,s,i,r,p,h,a,l,u,c,d={}.hasOwnProperty,f=function(t,e){function n(){this.constructor=t}for(var o in e)d.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},v=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};c=Tether.Utils,r=c.extend,n=c.addClass,h=c.removeClass,p=c.hasClass,t=c.Evented,u="ontouchstart"in document.documentElement,s=["click"],u&&s.push("touchstart"),l=function(t){var e,n,o,s;return o=t.split(" "),e=o[0],n=o[1],("left"===e||"right"===e)&&(s=[n,e],e=s[0],n=s[1]),[e,n].join(" ")},e={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},o={},a=function(t,e){var n,o;for(o=[];-1!==(n=t.indexOf(e));)o.push(t.splice(n,1));return o},i=function(u){var c,d,m,g;return null==u&&(u={}),m=function(){return function(t,e,n){n.prototype=t.prototype;var o=new n,s=t.apply(o,e);return Object(s)===s?s:o}(c,arguments,function(){})},r(m,{createContext:i,drops:[],defaults:{}}),d={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,tetherOptions:{}}},r(m,d,u),r(m.defaults,d.defaults,u.defaults),null==o[g=m.classPrefix]&&(o[g]=[]),m.updateBodyClasses=function(){var t,e,s,i,r;for(t=!1,r=o[m.classPrefix],s=0,i=r.length;i>s;s++)if(e=r[s],e.isOpened()){t=!0;break}return t?n(document.body,""+m.classPrefix+"-open"):h(document.body,""+m.classPrefix+"-open")},c=function(t){function i(t){if(this.options=t,this.options=r({},m.defaults,this.options),this.target=this.options.target,null==this.target)throw new Error("Drop Error: You must provide a target.");this.options.classes&&n(this.target,this.options.classes),m.drops.push(this),o[m.classPrefix].push(this),this._boundEvents=[],this.setupElements(),this.setupEvents(),this.setupTether()}return f(i,t),i.prototype._on=function(t,e,n){return this._boundEvents.push({element:t,event:e,handler:n}),t.addEventListener(e,n)},i.prototype.setupElements=function(){return this.drop=document.createElement("div"),n(this.drop,m.classPrefix),this.options.classes&&n(this.drop,this.options.classes),this.content=document.createElement("div"),n(this.content,""+m.classPrefix+"-content"),"object"==typeof this.options.content?this.content.appendChild(this.options.content):this.content.innerHTML=this.options.content,this.drop.appendChild(this.content)},i.prototype.setupTether=function(){var t,n;return n=this.options.position.split(" "),n[0]=e[n[0]],n=n.join(" "),t=[],t.push(this.options.constrainToScrollParent?{to:"scrollParent",pin:"top, bottom",attachment:"together none"}:{to:"scrollParent"}),t.push(this.options.constrainToWindow!==!1?{to:"window",attachment:"together"}:{to:"window"}),u={element:this.drop,target:this.target,attachment:l(n),targetAttachment:l(this.options.position),classPrefix:m.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:t},this.options.tetherOptions!==!1?this.tether=new Tether(r({},u,this.options.tetherOptions)):void 0},i.prototype.setupEvents=function(){var t,e,n,o,i,r,p,h,a,l,u=this;if(this.options.openOn){if("always"===this.options.openOn)return void setTimeout(this.open.bind(this));if(n=this.options.openOn.split(" "),v.call(n,"click")>=0)for(i=function(t){return u.toggle(),t.preventDefault()},e=function(t){var e,n,o,s;if(u.isOpened()&&t.target!==u.drop&&!u.drop.contains(t.target)&&t.target!==u.target&&!u.target.contains(t.target)){for(s=u.tether.attachedTethers,n=0,o=s.length;o>n;n++)if(e=s[n],e.element.contains(t.target))return;return u.close()}},a=0,l=s.length;l>a;a++)t=s[a],this._on(this.target,t,i),this._on(document,t,e);return v.call(n,"hover")>=0?(o=!1,h=function(){return o=!0,u.open()},p=null,r=function(){return o=!1,null!=p&&clearTimeout(p),p=setTimeout(function(){return o||u.close(),p=null},50)},this._on(this.target,"mouseover",h),this._on(this.drop,"mouseover",h),this._on(this.target,"mouseout",r),this._on(this.drop,"mouseout",r)):void 0}},i.prototype.isOpened=function(){return p(this.drop,""+m.classPrefix+"-open")},i.prototype.toggle=function(){return this.isOpened()?this.close():this.open()},i.prototype.open=function(){var t,e,o=this;if(!this.isOpened())return this.drop.parentNode||document.body.appendChild(this.drop),null!=(t=this.tether)&&t.enable(),n(this.drop,""+m.classPrefix+"-open"),n(this.drop,""+m.classPrefix+"-open-transitionend"),setTimeout(function(){return n(o.drop,""+m.classPrefix+"-after-open")}),null!=(e=this.tether)&&e.position(),this.trigger("open"),m.updateBodyClasses()},i.prototype.close=function(){var t,e,n=this;if(this.isOpened())return h(this.drop,""+m.classPrefix+"-open"),h(this.drop,""+m.classPrefix+"-after-open"),this.drop.addEventListener("transitionend",t=function(){return p(n.drop,""+m.classPrefix+"-open")||h(n.drop,""+m.classPrefix+"-open-transitionend"),n.drop.removeEventListener("transitionend",t)}),this.trigger("close"),null!=(e=this.tether)&&e.disable(),m.updateBodyClasses(),this.options.remove?this.remove():void 0},i.prototype.remove=function(){var t;return this.close(),null!=(t=this.drop.parentNode)?t.removeChild(this.drop):void 0},i.prototype.position=function(){var t;return this.isOpened()?null!=(t=this.tether)?t.position():void 0:void 0},i.prototype.destroy=function(){var t,e,n,s,i,r,p,h;for(this.remove(),null!=(r=this.tether)&&r.destroy(),p=this._boundEvents,s=0,i=p.length;i>s;s++)h=p[s],t=h.element,e=h.event,n=h.handler,t.removeEventListener(e,n);return this._boundEvents=[],this.tether=null,this.drop=null,this.content=null,this.target=null,a(o[m.classPrefix],this),a(m.drops,this)},i}(t),m},window.Drop=i(),document.addEventListener("DOMContentLoaded",function(){return Drop.updateBodyClasses()})}).call(this);